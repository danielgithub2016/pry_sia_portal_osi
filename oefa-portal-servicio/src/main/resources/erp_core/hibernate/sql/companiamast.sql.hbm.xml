<?xml version="1.0" encoding="UTF-8"?>
<!--
 *
 * @author : desarrollo
 * @powerbuilder : core.Companiamast
-->
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <sql-query name="companiamast.dwmacompanyownerselectsecurity">
		<![CDATA[
		SELECT 
			COMPANYOWNER.COMPANYOWNER AS "companyowner",   
			COMPANYOWNER.DESCRIPTION AS "description",   
			COMPANIAMAST.TIPOCOMPANIA AS "tipocompania",   
			COMPANIAMAST.DESCRIPCIONCORTA AS "descripcioncorta",   
			COMPANIAMAST.DESCRIPCIONLARGA AS "descripcionlarga",   
			COMPANIAMAST.DOCUMENTOFISCAL AS "documentofiscal" 
			FROM 
			SGCORESYS.COMPANYOWNER
			    INNER JOIN SGCORESYS.COMPANIAMAST
			        ON (COMPANYOWNER.COMPANY = COMPANIAMAST.COMPANIACODIGO)
			    INNER JOIN SGCORESYS.SY_SEGURIDADAUTORIZACIONES  
			        ON (COMPANYOWNER.COMPANYOWNER = SY_SEGURIDADAUTORIZACIONES.CONCEPTO)
			    INNER JOIN SGCORESYS.SEGURIDADAUTORIZACIONCOMPANIA
			        ON (COMPANYOWNER.COMPANYOWNER = SEGURIDADAUTORIZACIONCOMPANIA.COMPANYOWNER AND
			             SEGURIDADAUTORIZACIONCOMPANIA.COMPANYOWNER = SY_SEGURIDADAUTORIZACIONES.CONCEPTO AND
			             SY_SEGURIDADAUTORIZACIONES.USUARIO = SEGURIDADAUTORIZACIONCOMPANIA.USUARIO)
			WHERE 
			( COMPANIAMAST.ESTADO = 'A' ) AND  
			( SY_SEGURIDADAUTORIZACIONES.APLICACIONCODIGO = 'SY' ) AND  
			( SY_SEGURIDADAUTORIZACIONES.GRUPO = 'COMPANIASOCIO' ) AND  
			( SY_SEGURIDADAUTORIZACIONES.ESTADO = 'A' ) AND  
			( SY_SEGURIDADAUTORIZACIONES.USUARIO = :usuario )
			ORDER BY 
			COMPANYOWNER.COMPANYOWNER ASC   
		]]>
    </sql-query>
</hibernate-mapping>
